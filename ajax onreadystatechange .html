<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>onreadystatechange 事件</title>
    <script>
        function loadXMLDoc() {
            let xmlhttp;
            if(window.XMLHttpRequest){
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else{
                // code for IE6, IE5低版本浏览器
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function(){
            // readyState 	
            // 存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。
            // 0: 请求未初始化
            // 1: 服务器连接已建立
            // 2: 请求已接收
            // 3: 请求处理中
            // 4: 请求已完成，且响应已就绪

                // 当 readyState 等于 4 且状态为 200 时，表示响应已就绪
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
                    document.getElementById("div1").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","test1.txt",true);
            xmlhttp.send();
         }


         // callback 函数是一种以参数形式传递给另一个函数的函数。
         // 如果您的网站上存在多个 AJAX 任务，那么您应该为创建 XMLHttpRequest 对象编写一个标准的函数，并为每个 AJAX 任务调用该函数。
         // 该函数调用应该包含 URL 以及发生 onreadystatechange 事件时执行的任务（每次调用可能不尽相同）：
        //  var xmlhttp;
        //  function loadXMLDoc(url,cfunc)
            // {
            // if (window.XMLHttpRequest){
                // code for IE7+, Firefox, Chrome, Opera, Safari
                // xmlhttp=new XMLHttpRequest();
            // }
            // else{
                // code for IE6, IE5
                // xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            // }
            // xmlhttp.onreadystatechange=cfunc;
            // xmlhttp.open("GET",url,true);
            // xmlhttp.send();
        // }
            // function myFunction(){
            // loadXMLDoc("test1.txt",function()
            // {
            //  if (xmlhttp.readyState==4 && xmlhttp.status==200){
            // document.getElementById("div1").innerHTML=xmlhttp.responseText;
        // }
        // });
    // }
    </script>
</head>

<body>

    <div id="div1">
        <h2>Let AJAX change this text</h2>
    </div>
    <button type="button" onclick="loadXMLDoc()">通过 AJAX 改变内容</button>

</body>

</html>